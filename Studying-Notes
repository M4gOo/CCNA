
https://learningnetwork.cisco.com/s/certification-exam-tutorials

==================== CONCEPTS ==========================

OSI MODEL - The OSI model is a conceptual framework that helps lay out how computer networking protocols should work with each other.
LAN - A Local Area Network is a network that connects devices which are in the same local area, like in a single office or a university campus or house.
CoS - Class of Service helps resolve the problem of network congestion by giving certain types of traffic priority over others. Network congestion occurs when multiple messages are competing for network resources at the same time.
Out of Band Management -  most the large companies do is they'll also have a separate dedicated network for management. Gives you a backup path that you can use
to connect to your network devices if they have any problems and it is more secure.
Production Network (In Band) - it being used for your normal user traffic, the network that is used for your staff in their normal activities.
QoS - Quality of Service is, you might have one particular type of traffic that requires a better level of service than another level of traffic.

================ COMMANDS =======================

### short-cut and usefull settings/commands
Ctrl + C - That will break out the command. Dont need to press space bar to see all the commands.
Ctrl + A  - to move to the start of the line
Putty conf scroll - in putty setting adjust 'line of scrollback'
TAB - autocomplete the entire word
DO show ... - use DO in the front in case you are in the global conf, usually show is used in the priv exec mmode
end - back to the priv exec mode
exit - back one level
you dont need worry about case sensitive, only when using pipe (`|`)
reload - reboot the device
invalid  input error - check if you are at the right level or it is a typo
ip route - output default via means default gateway in linux
show ip interface - show the default gateway on cisco 
ip subnet-zero - disables removing 2 networks (all 0's and all 1's)


### help
? or di?, en?, - If I want to see some commands available (use space bar or enter to see all commands) 
<whatever> ? - it shows you all of the possible keywords for that particular command
sh run | ?


#### often commands
disa (disable) - Router> - user exec prompt   (router is the name of the device, you can rename)
en (enable) - Router# - privileged exec mode  
debug -  the output will be updated in real time
conf t (configure terminal) -  Router#(config) -  To actually make changes, we go to global configuration.
do show startup-config - startup configuration, any change it will be permanently even after reboot
show running-config - that shows the entire running configuration on the router
show ip interface brief - show all the interfaces available in the router, and the state of the interface, whether it's up or not, the IP address configured on the interface as well
show(sh) run interface <fast0/0> 
sh run | begin hostname  - when use pipe is case sensitive
show mac address-table dynamic - view dynamic table mac add table in the switch
clear mac address-table dynamic - clear dynamic table mac add table in the switch. Usually switch will periodically flush old entries
(config) interface f0/0 THEN (config-if) no shutdown -> you need to choose the interface THEN no shutdown (this makes the interface administratively down to STATUS UP)



### command for DNS and ARP
(config)# ip domain-lookup
(config)# ip name-server <domain IP>   
# show arp
# ping <domain name>

removing incorrect entry for DNS
(config) no ip name-server <IP_wrong>
(config) ip name-server <IP_correct>


### command to troubleshooting connectivity
ping           - verifies two-way connectivity between a source and a destination. Troubleshooting layer 3 problem
traceroute     - if a ping fails use the traceroute. A traceroute does a ping, hop by hop, from the source to the destination, and it will often indicate which router along the path has got the problem. Troubleshooting layer 3 problem
telnet         -  is normally used for managing your network infrastructure devices (routers and switches). it can be used for is checking to see if a port is open on a destination. Troubleshooting layer 4 problem
So from one router (R1), I'm going to telnet to 10.10.30.1 (DNS server), and I'm going to telnet to port 53, which is the DNS port, and this should tell me if DNS is running on R3 (10.10.30.1) or not.


'remote host not responding' -> connectivity issue
this when you ping an IP, it is good to use traceroute IP


on R1 or SW1

show interface fast0/0    -> shows you traffic statistics as well.
So if you think there's maybe an issue with an interface, this is a useful command for troubleshooting that. 
It also will verify if traffic is passing throughthe interface or not as well.


DEBUG xxxx SHOW COMMAND

Debugs are similar to show commands but where a show command gives you a point in time snapshot
information, debug information gets updated in real time.



==========================  TROUBLESHOOTING


if a device just appears to be completely unresponsive, but it is powering on. So, that indicates that the device is probably failing to boot up.
IP address on the device is not live until it has completed the bootup process.

The first questions.
It was working before
Something changed which could cause the problem
Tre problem affect everybody or particular user (if particular user, problably the problem is at their end)


When you do a debug command, what will happen is that the output will be updated in real time.


test DNS - ping R1

Check TCP/IP is working use the command ping


In an existing organization, you've already got existing routers and switches there, so rather than doing a new configuration from scratch, you'll do it based on a template.
there's a problem, you think it's on a particular router, you can compare it with another router which should have a similar configuration and look for any differences there.
By comparing it with a known good configuration, this can help you find the problem more quickly

If you think that you have narrowed the problem down to a particular device, but you can't see a configuration error on there, a way you can confirm it is by swapping out with some known good hardware.
For example, a really simple one would be a cable.

The best way to troubleshoot connectivity problems and tracing the path is start off at the source and work your way towards the destination.

First thing to do, real world, whenever a user reports a problem is don't believe them. Check it first!!!!
ping the DNS using the hostname on one of the routers If it says unrecognized host or address, or protocol not running, so we do have an issue.
Then try to ping using the IP address.  If it is unreachable, we got some kind of connectivity issue between the routers
Use the command trouceroute. it does a ping, but it sends the ping with a Time To Live (TTL) value of 1, and then 2, and then 3, and then so on. If doesn't show connectivity with one oof the routers,
check if there is a interface connect/up in that router.
Check Telnet. So from one router (R1), I'm going to telnet to 10.10.30.1 (DNS server), and I'm going to telnet to port 53, which is the DNS port, and this should tell me if DNS is running on R3 (10.10.30.1) or not.


---------------- troubleshooting layer 1

Layer 1 troubleshooting tools are 'show ip interface brief' and 'show interface'.

at Layer 1, useful command is 'show ip interface brief'.
When you do that, it will show you the status of the interface. If it shows 'administratively down',
that means you haven't entered the no shutdown command. 
So, do that to bring the interface up. 

If it shows 'down/down',
that means that the administrator has done a no shutdown on the interface, but there's a Layer 1 issue.
So, check that it is cabled in at both ends and the device on the other side is powered on.
If the device on the other side is powered off, or if you don't have a cable securely connected on both sides,
the interface will show as "down/down." 

The last setting you can have there for the status in a show ip interface brief is "up/down." 
That typically indicates a Layer 2 issue or a speed mismatch. So, in this case, check if the interface configuration is the same on both sides of the link.
A common issue would be if you've got different VLAN settings on both sides of the link.


---------------- troubleshooting layer 2

troubleshoot Layer 2 issues are 'show arp' and 'show mac address-table' on our switches


---------------- troubleshooting layer 4

we can 'telnet' to the destination IP address and the port number, and that will tell us if it's answering on that port or not.

---------------- troubleshooting layer DNS 

we can do an 'nslookup'.
We can also ping by the FQDN to see if a DNS server is able to resolve that name.


--------- Connectivity Troubleshooting

when users complain that they can't access the Internet or an internal company application over the network.
Two of the main tools that we have to troubleshoot these issues are ping and traceroute.

----ping it's used for testing connectivity.

If the ping is successful on a Cisco router, you will see exclamation marks.
It's quite normal for the first ping to fail if the router is updating its ARP cache at the time. So if we've got a success rate of 80%, 4 out of 5 pings are good
If you see 5 dots though, that is bad. That indicates the ping has failed. So this could be because the router does not have a corresponding route or the destination IP address is not responding. 
Less common is, you can see U's, which means that it is unreachable. That happens if the router discards the packet. For example, if it's being blocked by an Access Control List (ACL)

if you're ever doing a ping from a router because our users complained of connectivity issues, do the ping with the source address on the same subnet.

'extended ping' command
invoke an extended ping is just enter 'ping' and then hit enter.
It will then go through a wizard that will ask you the options you want to set for the ping.
"Do you want to go into the extended commands?"
So we say, "Yes" there. The first thing that it'll ask is, "What do you want to use as a source address?"
Then we can say the IP address that the actual client is having the problems is in, and then just keep hitting enter to accept the defaults for everything else.


----Traceroute is very similar to ping, and it's also used for checking connectivity

what traceroute does is it traces the path the traffic is taking when it's going across the network
traceroute takes advantage of the TTL field, which is in the IP header

TTL - Every time that a router passes a packet on from one interface to another, it decrements the TTL by one
If we were sending something, maybe 10 hops away, then R1 would send the first packet with a TTL of 1, then a TTL of 2, then a TTL of 3, and so on.
And by doing that, it's able to map out the path that the traffic is taking, hop by hop, all the way across to the destination. 


if a ping succeeds and a traceroute fails, don't worry about it.
The traffic is working. Sometimes, the last hop will fail in a traceroute.
Also, sometimes, firewalls will drop traceroute traffic as well.

========================= BACKUP CONFIGURATION =========================

copy run start - Router# - being copied to the startup configuration, so change made in starup-config it will persistent.
copy run flash:, then press ENTER, after type the name of your start configuration <my-config> - back up the configuration. 
sh flash - To verify the copied configuration
If I wanted to restore from this backup, first erase the start up configuration, because if you copy it will merge and not replace the commands.
erase start or write erase (old versions)
copy flash:<my-config> start

This way you made a backup in the same device, which is not a good idea. So it is better to back it up somewhere else.
The easiest way to do that would be to copy the running configuration to a TFTP server. You need to have this server on
copy run tftp

Check the content of my backup. That will print out here what the contents of that configuration file are.
more flash:<my-config>


================== Network Characteristics ================================

topology  -  diagram HOW the devices are connected to each other
speed   - faster is the network more it will cost
cost   -  depends of the type of device are using, size of network, technology using
security  - firewall, in the switches, in the routers, Intrusion Prevention Systems (IPS)
availability - make sure it is always stays up, when it is a critical network it is good to double up the components
scalability  - design a network in a way to easy grow, avoiding to redisgn
reliability  - similiar to availability, make sure it is reliable and it is going to work


================== OSI model 

- it is conceptual
- it is just a framework that characterises and standardises how computers communicate with one another over a network
- seven layers
- starts at the top to the bottom (sender) layer -> Encapsulation
- go across the layer 1 the package
- starts at the bottom to the top(receiver) layer -> De-Encapsulation
- helps to troubleshooting, so you can analyse the issue layer by layer 
- helps to learning a new network technology


=================== Layer 7 - APPLICATION

it establishes the availability of intended communication partners. It then synchronizes and establishes agreement on procedures for error recovery and control of data integrity. 
Data integrity means checking that data has not been altered or corrupted in transit.

=================== Layer 6 - PRESENTATION

The Presentation Layer can translate among multiple data format using a common format.
Ensures that communications that pass through it are in the appropriate form for the recipient application.

=================== Layer 5 - SESSION

This establishes, manages, and terminates sessions between two communicating hosts. 

For example, we might have web servers which have got many users that are using that web server.
So, in that case, we would have multiple incoming sessions. The Session Layer keeps track of all of those.

It also offers efficient data transfer, Class of Service (CoS), which is similar to efficient data transfer,
and exception reporting of upper layer problems.

Class of Service (CoS) helps resolve the problem of network congestion by giving certain types of traffic priority over others.
Network congestion occurs when multiple messages are competing for network resources at the same time.


=================== Layer 4 - TRANSPORT

TCP\UDP and port nummber
if we want the communication between the two hosts to be reliable - TCP
if speed is more important than reliability (voice or video) - UDP
It breaks down large files into smaller segments that are less likely to incur transmission problems

it provides transparent transfer of data between hosts and is responsible for end-to-end error recovery and flow control.
flow control - adjusting the flow of data from the sender to ensure that the receiving host can handle all of it. The sender send a signla to slow down


multiplexing - This is a process by which a host is able to support multiple sessions simultaneously and manage the individual traffic streams over a single link.
It's the Layer 4, the Transport Layer, that is responsible for tracking (use the combination of source (usually is above 1024 and it  is random number) and destination port numbers) 
and keeping control of the different sessions on a host. 
The tracking system is how stateful firewalls are able to keep track of connections as well

Explaining how multiplexing works:
- sender on the left, and there's going be a couple of receivers over on the right.
- The sender sends some email, SMTP traffic, to the top receiver on port 25, and it also sends
some web traffic on HTTP port 80 to the bottom receiver, and it's also sending email traffic on port 25 to the bottom receiver as well. 
- from the sender on the left, we've got three sessions from it. 
The top receiver on the right, we've got one session
the bottom receiver we've got two sessions


TCP ---------------------------------

The way that connection-oriented is set up between the two hosts is it uses the TCP three-way handshake.
It sends a SYN, a Synchronized Message, over to the receiver. When the receiver receives that, it will send SYN-ACK back, so a Synchronized Acknowledgment,
and then finally, to complete the connection, the sender will send an acknowledgment, ACK. So, connection set up between the two hosts, and they can send traffic over it.

TCP carries out sequencing, so it includes sequence numbers in the traffic to ensure that segments are processed in the correct order, and none are missing.
So when traffic comes into the receiver, it can look at the sequence number, and it can use that to make sure it assembles the traffic in the correct order again.

TCP is reliable. It can also check from the sequence numbers if a segment was lost in transit as well. 
Receiving host sends acknowledgments back to the sender. So based on the sequence numbers, the receiver can see
if all the traffic has come in. If any traffic is being lost in transit, then it will tell the sender that happened. 
The way it does it is by not sending an acknowledgment back to the sender. When a sender realizes that traffic is being lost, it will resend that traffic again

TCP can also perform flow control, if the sender is sending a rate too high and the receiver cannot handle it, the receiver can signal back to the sender, telling it to slow down. 


UDP ---------------------

we don't have the connection, we don't have reliability.
The sender just makes up the packet, sends it over to the receiver, and hopes that it's going to get there.
So UDP, it's not connection-oriented.
There's no handshake connection setup between the hosts. It doesn't carry out sequencing to ensure
segments are processed in the correct order or missing. It's not reliable. The receiving host does not send
acknowledgments back to the sender. It does not perform flow control.

UDP is used in Voice and video, it's very sensitive to delay. 
Watching the news report where the newscaster is doing it over a satellite phone (it's very laggy because satellites are famously high latency connections)
So voice and video, it's very sensitive to latency.
We don't want to use TCP for real-time traffic like that because the extra overhead is going to slow it down, and it's going to affect the quality.


=================== Layer 3 - NETWORK

IP Address (source and destination)
Other Layer 3 protocols apart from IP include ICMP, which is the Internet Control Message Protocol, which is used for ping.

troubleshooting
Routers devices 
they can direct traffic between your different IP subnets.
Routers support many different types of interfaces such as Ethernet, Serial, ISDN, and ADSL

The Network Layer is the layer that manages the connectivity of hosts by providing logical addressing. IP addressing is our logical addressing.

Layer is responsible for routing packets to their destination on the network
it's also responsible for Quality of Service as well.
Quality of Service is, you might have one particular type of traffic that requires a better level of service than another level of traffic.


The network designer uses IP addressing to partition the overall network into smaller subnetworks, or commonly called subnets. By having different subnets,
it improves performance and security and makes troubleshooting easier. 

IPv6 address space is actually 7.9x10 to the power of 28 times as many addresses as IPv4

layer 3 header------------------------

Maximum size by default in Ethernet is a 1500 byte MTU.
If we try a packet onto the wire that is larger than that size, it has to get split up into smaller parts which are called our fragments.

The second row of information on the IP header is used to help keep track of those fragments.

The next row down, we have an 8-bit time to live (TTL) field.
Every time a packet goes through a router, the router will decrement the TTL field by one.
If it gets down to zero, then that router will drop the packet, this is for is to prevent routing loops.

checksum which is used to check that packet has not been corrupted in transit.



=================== Layer 2 - DATA-LINK

ethernet protocol
ARP protocol
MAC Address -  48-bit hexadecimal address. If we look back a slide, 6 Bytes, each Byte is 8 bits, so 6 times 8 = 48 bits
MAC address is split into two different halves, as concerns what makes up the MAC address. The first half,
so the first 24 bits, is the OUI. That's the Organizationally Unique Identifier, and that identifier is the manufacturer of the Ethernet port.
The second half of the address, so the last 24 bits, that is assigned by the manufacturer. The burned in MAC address on every NIC port in the world is globally unique.
no logical addressing with your MAC addresses. It's just one big flat address space

to check mac address on cisco devices - show interface (on priv exec). it will show Hardware XXX, address <MAC ADDRESS NUMBER>

Switches devices
Switches will typically only support Ethernet interfaces.
it is very common to have Layer 3 switches routing the traffic which is within the different subnets on your Local Area Network.
However, if your connection outside that campus, out to the Wide Area Network, is using an interface type which is not Ethernet, then you would still require a normal traditional router for that traffic as well.
The most important information is the source and destination Layer 2 address.
it defines how data is formatted for transmission and how access to the physical media is controlled.
It also typically includes error detection on correction to ensure a reliable delivery of the data.


Whenever a frame is received, the switch will look at the source MAC address in the Layer 2 Ethernet header, and it will learn that MAC address
Whenever a frame is received for the broadcast address or an unknown unicast address, it would be unknown because the switch hasn't learned about it yet, it will be flooded out all ports
apart from the one it was received on. 

=================== Layer 1 - PHYSICAL 

ethernet protocol
Hubs can't  send or receive at the same time withou collision
Hubs devices it is half duplex, they dont have detecting and recovering from collisions which is CSMA/CD (Carrier-Sense Multiple Access with Collision Detection), this avoid colision. 
it enables bit transmission, the 1s and 0s, between end devices. It defines specifications needed for activating, maintaining, and
deactivating the physical link between end devices. For example, voltage levels, physical data rates, maximum transmission distances, and physical connectors, etc.


the difference between the Categories (cat5, cat6,cat7,...) have got support for higher bandwidth connections.
cat5 vs cat6 - cat is twisted thighter and have a plastic guid in the middle of the cable

What is common using crossover cables is connecting your switches to each other, nowadays modern swtiches can use normal cables (just check if supports Auto MDI-X)

RJ-45 Connector will plug directly into the switch. But fiber connectors, they'll normally go into a transceiver, which then goes into the switch.



=================== TCP\IP STACK ===============================================

TCP\IP stack is the main protocol stack used in production. It is also layered
protocol means it is going to control HOW that communication should behave, HOW it should work. 

DATA    - Application layer (OSI model - Application + Presentatiobn + Session): Represents data users, encodes and contols the dialog
SEGMENT - Transport layer (OSI model - Transport): supports communication between end devices across a diverse network
PACKET  - Internet layer (OSI model - Network): provides logical add and determines the best path through the network
FRAME - Network layer (OSI model - Data Link + Physical): controls the hardware devices and media that make up the network


host communication terminology - data, segment, packet, frame

when 2 hosts talk to each other they are exchanging Protocol Data Units (PDUs). But on daily PDUs are refered as packets
this is the entire communication from layer 7 to layer 1


=========================  unicast, broadcast, and multicast

Three main types of traffic that will send over an IP network

Unicast traffic - it's coming from a sender, and it's going to one particular host.
Broadcast traffic - goes to all hosts on the subnet. the sender sends one copy of the traffic that will come into the switch, and then it gets flooded out to all other hosts on that particular part of the network. 
if the traffic hit the router, it will not forward broadcast traffic on.
Multicast traffic goes to multiple interested hosts - we send one copy that goes to multiple different destinations (we've got good bandwidth savings there!!!!)


broadcast VS muticast

broadcast traffic goes to everywhere on that particular part of the network, whether the receiver has requested it or not. 
Multicast goes through multiple receivers, but it's targeted. They have to request it before they're going to actually get it. 

A good analogy for multicast traffic is, you can think of it like tuning into a radio station. So all of the different receivers, they've tuned in that particular station, they're going to get that particular traffic.


============================ BINARY

Decimal 0 - 9,  every column add is multiple by 10
Binary 0 - 1, every column add is multiple by 2


IPv4 - 32 bits long, 4 octets ( each octet is 8 bits long)
Each octet in the IP address has a value ranging from 0 to 255.

8 bits -  128  |  64  |  32 |  16  |  8  |   4  |  2  |  1
2^0 - 1
2^1 - 2
2^2 - 4
2^3 - 8
2^4 - 16
2^5 - 32
2^6 - 64
2^7 - 128


============================ SUBNET MASK

To set the boundary between our logical networks, our subnets, the IP address is going to be combined with a subnet mask

A host can send traffic directly to another host on the same subnet via the switches they're attached to. 
But for a host to send traffic to another host in a different subnet, it must be forwarded by a router.
Routers are our devices that link our different subnets together and route the traffic between them

the way that the host knows whether the destination is on the same subnet or a different subnet is by comparing the IP address of the destination to its own IP address and the subnet mask.


A host's IP address is divided into a 
network portion and a host portion
it's the subnet mask that defines where the boundary is between the network part and the host part of the address.
A '1' in the subnet mask indicates that bit in the IP address is part of the network address, and a '0' indicates that the bit is part of the host address.


there's two particular addresses that can not be assigned to a host.
All 0's in the host portion designates the network address and is not allowed to be allocated to a host. All 0's signifies the network address, which is the bottom address in the range. 
All 1's, which is the top address in the range, that is the directed broadcast. Whenever you send traffic to the directed broadcast address, it goes to all hosts in that subnet


-------------- Classes A, B,C, D, E, F

### Class A addresses are assigned to networks with a very large number of hosts, there's going to be a small network portion and a large host portion. /8
1.0.0.0 to 126.255.255.254 (1 - 126)
2^24 - 6,777,214 hosts per network.
it's the first bits in the address are always going to be set to 0
all 0s and 127 are not in the valid address range that we can assign to our hosts because they are reserved addresses. 
0.0.0.0/8 is reserved and signifies 'this network', and it's used by some protocols. So, 0.0.0.1 to 0.255.255.255 are not valid addresses that you can assign to hosts.
127.0.0.0/8, which is also in the Class A space, is also reserved. That is used as the loopback address, and it's used for testing the IP stack on the local computer.


### Class B were originally assigned to medium to large-sized networks
it's the first two bits in the address are always going to be set to 1 0
default subnet mask is /16
128.0.0.0 to 191.255.0.0 (128 - 191)


### Class C is used for small networks
They're always set to binary 1 1 0.
default subnet mask is /24
192.0.0.0 to 223.255.255.0 (192 - 223)


### Class D is used for multicast addresses.
the four high-order bits, the first four bits, in the first octet are always set to the binary value of 1 1 1 0
224.0.0.0 to 239.255.255.255 (224 - 239)
These Class D addresses, they're not allocated to hosts, and there's no default subnet mask
With multicast traffic, we're going to send one copy of the traffic from 10.10.10.10, and that one copy
is going to get sent to 10.10.10.15 and 10.10.20.15 as well.
We are going to run an application on the sender, which is going to send it as multicast traffic, and in
our example, we're going to send it to a destination multicast address of 239.0.0.1.
It still comes from the same source address of 10.10.10.10, and the destinations still have their normal unicast addresses there as well,
but we send it to this special multicast address. That will then go to all of the hosts that were interested in getting that traffic.


### Class E addresses, they are experimental and reserved for future use.
The first bits in a Class E are always set to 1 1 1 1.
240.0.0.0 to 255.255.255. (240 - 255)
these addresses do not have a default subnet mask.
There is one special address used in Class E, which is the broadcast address of 255.255.255.255.


----------------- PRIVATE ADDRESSES

IETF, that's Internet Engineering Task Force, in RFC 1918. 
Private IP addresses were originally for hosts that should not be connected to the Internet.
There's also a range of reserved private addresses in each class.
Those are valid to be assigned to hosts, these ones are not routable on the public Internet.
So, these were originally designed for hosts in a closed private network that should have no Internet connectivity.

CLASS  A - 10.0.0.0 to 10.255.255.255      - subnetmask is /8
CLASS  B -  172.16.0.0 to 172.31.255.255   - subnetmask is /12
CLASS  C - 192.168.0.0 to 192.168.255.255  - subnetmask is /16


if you're using a private IP address on the inside, whenever you communicate with anybody out on the public
Internet, when the traffic gets to them, it looks like it's coming from a public IP address,so they're able to send the traffic back to you.
And many hosts in the inside, so many hosts in the inside using those private IP addresses, can share a few or even just a single public IP address on the outside.

you can not send traffic to a private IP address on the Internet. Because all the different companies are using those
private IP addresses, the Internet would not know which one to send it to. Therefore, internal use within the organization only. 


============================= SUBNETING ============================================
http://www.subnet-calculator.com/
http://www1.subnettingquestions.com/
https://subnetting.org/
https://subnettingpractice.com/subnets.html

---------------- CIDR - Classless Inter-Domain Routing

CIDR removed the fixed /8, /16, and /24 requirements for the different advanced classes and allowed them to be split into smaller networks, and the name for this is subnetting. 


Summarization -  ISP B only learns one route to all the networks behind ISP A rather than learning 256,and ISP B will vice versa just advertise one route of 175.11.0.0/16 to ISP A.
The benefits we get from summarization is that ISP A doesn't know about all 256 networks behind ISP B. It only gets a single summary route that covers all of them.
It's more efficient, it takes up less memory in the router. And if an individual link goes down in an ISP B, it doesn't have any impact on ISP A because that one summary route doesn't change. 
Compartmentalizing the different parts of our network, and if we've got an issue in part A of the network, it's not going to impact part B of the network.


we can buy a single class C range, and then we can divide that network up into smaller networks and assign it to the different parts of our networks.
we've got that Class C range, and it is 200.15.10.0/24, the default Class C subnet mask. So to do our subnetting, to divide that network into smaller subnets,
we need to borrow some host bits and add them to the network portion of the address.
To calculate the number of available subnets that we're going to get by moving the line to the right, we use a formula of 2 to the power of subnet bits.
If a Class C network uses a /28 subnet mask, then we've borrowed 4 bits from the default of /24
the difference between 24 and 28 is 4. The way we calculate how many subnets we're going to get by doing that is it's 2 to the power of the amount of SUBNET BITS THAT WE'VE BORROWED.
it's 2 to the power of 4
I'm going to now have 16 available subnets.

To calculate the number of hosts, it's 2 to the power of how many HOSTS BTIS THERE ARE minus 2. (subtract 2 because we've got the network address and the broadcast address that can not be assigned to hosts)


remember that hosts on different subnets need to go via a router if they want to communicate with each other.


------------------- /31 - Cisco allowed that exception. broadcast and network address
A /31 subnet breaks the standard rules of IP addressing, where we have to have the network address and the broadcast address at the top and the bottom of the range.
on Cisco routers /31 is supported for point to point links means there's this one side and the other side.
Well, any traffic that comes from here needs to go at the other side, and vice versa. There's nowhere else for it to go, so there isn't really any point in having a network and a broadcast address.


------------------ /31 VS /30
/31 supported a 128 subnetworks
/30 only supported 64

Better to use a /31. This is useful if you need to maximize the use of your address space.
But a /30 is more commonly used, it's more standardized. For the CCNA exam always use a /30.
If the question requires you to come up with a subnet that supports 2 hosts, use a /30 unless the question explicitly tells you to use a /31.

---------------- /24
with the subnetting is /25 it will split the networkss by 2 and divide by 2 the hosts
/25 - 2 networks and 126 hosts (the other 2 is broadcast and network)
/26 - 4 networks and 62 hosts  (the other 2 is broadcast and network)
...


----------------- Variable Length Subnet Masks (VLSM).
With early routing protocols, like RIPv1, they only supported Fixed Length Subnet Masks (FLSM), which meant you could subnet, but all subnets in a particular network had to be the same size.
You couldn't mix and match /27, /28, /29 within the same larger network, but that ended up wasting a lot of addresses.
support for Variable Length Subnet Masks means that within the same range, you can have different sizes of subnets
we can use different length subnet masks within the same network. 
This is a good thing because it lets us be much more precise with the size of our networks, and we're going to be wasting a lot less addresses.



========================= DESIGN THE SUBNETTING ==========================================

The things that we need to consider when we're going to do the design are:

how many different locations do we have in the network that are going to need subnets and how many hosts are going to be in each of those subnets?
What are the IP addressing requirements for each of the different locations?
So should different departments or types of hosts to be in different subnets?

#  in a real world deployment, you want to have a scalable design.
# Do 3 or 4 subnets of XX hosts because then if you do have a new department that requires up to XX hosts later, you've got a spare subnet there waiting for it,
and everything is still sequential and contiguous, logical, going from largest down to smallest. (To find the XX number check your largest hosts in your design and add 2 or thress spare, it will cover
further company growth).
#  in the real world is you would also allocate address space for your loopback addresses. Loopback addresses are used for management. They're a logical address,
so there's no anything physical on the other, so we'll usually allocate a /32 to our loopback addresses.
# On network diagram put the network address IPs in every department and routers(devices) and next to the routers the first available host for the particular network address.
# Summarization - We connect the two routers between Region A and Region B. And from Region A, we can advertise 10.0.0.0/16, and from Region B, originate,
we advertise 10.1.0.0/16. So rather than advertising all 256 routes in both directions, we only advertise one route.
So it takes up less memory on the routers because we've got less routes that are known to therouters, and also, 
if there's a problem, the impact, there's a little call to that particular region. To be able
to do this, you need to be careful with the way that you plan your network addressing, and you need to make
sure that you allocate them in contiguous blocks like you see here. 

----------------- subnetting larger networks

4th octet
Class B it is /16 with /29 gives 6 hosts and 8192 (2^13  it is 13 cuz 29-16) subnets
Class A it is /8 with /28 gives 14 hosts and 1048576 (2^20  it is 20 cuz 28-8) subnets

3rd octet
Lets use the IP addr 60.15.10.75/19
Class A it is /8 with /19 gives 8190 (2^13 -2) hosts and 2048 (2^11  it is 11 cuz 19-8) subnets
The bondary between network and hosts is in the third octet just after 32 ( 128  |  64  |  <32> ||  16  |  8  |   4  |  2  |  1 ),
this means the  network address goes up in multiple of 32.
network 60.15.0.0, next network is 60.15.32.0
broadcast 60.15.31.255
hosts 60.15.0.1 to 60.15.31.254

magic number method. It was a /19, that's 3 bits on the 3rd octet.
So that is 128, 192, and then 224.
We subtract 224 from 256, which gives us 32 so that we know the address block is going up in values of 32.


134.65.0.0 into 6 different network 
134 it is class B, so /16 default. network 2^3 = 8 meaning /19, it will provide 8 subnets and 2^13-2=8190 hosts
network it will be 134.65.0.0, 134.65.32.0, 134.65.64.0


=============================== DNS =====================================================

layer 3, the sender has to put on the source and the destination IP address. Now with some applications, it will actually put the IP address directly in there, but quite often,
it will use an FQDN, a Fully Qualified Domain Name, such as www.cisco.com, and that FQDN hasto be resolved to an IP address that we can put into the packet.
So, that is where DNS comes in!!!!

Enterprises will typically have an internal DNS Server or a cluster of internal DNS Servers, which will resolve the IP addresses of their internal hosts.
if I was working for an enterprise called www.company.com, we would have our own internal DNS Server, which would be responsible for resolving all hosts that were in the www.company.com domain.
However, that internal DNS Server, it can't know about everything on the entire Internet.
It can't have the entire database there. So for anything external, it's going to need to forward those requests onto an external public DNS Server.
DNS requests are sent using UDP port 53


------------ configure DNS on cisco router
you will not usually want a Cisco router to be a DNS server. Usually, you would use an external Windows, or Unix or Linux server to do that, but it is capable of doing it.

The commands to configure a router to be a DNS Client. The reason you would do this is if you want the router itself to be able to resolve FQDNs.
So often, we won't do that. Often, when we're working on a router, we're always going to be working with IP addresses.

need to be in global conf level

want it to be able to resolve hostnames, the commands to enter are ip domain-lookup
to allow it to look up a DNS server ip name-server
the IP address of your DNS server ip domain-name server.lab
lookup additional DNS suffixes ip domain-list server.lab, and then those additional suffixes

If you wanted a router to be your DNS Server,then to configure that, you would enter those same commands plus 
ip dns server
is the command that configure it as a DNS server, and then you would need to enter address records for everything that you want it to be able to resolve. 
The command for that is 
ip host namehost IPhost 
and then the hostname and the IP address of that host.


=============================  DNS  + layer2 (MAC)  ------   ARP Address Resolution Protocol  ======================================

the sender can either send directly to an IP address or it can send to an FQDN. If it sends to that Fully Qualified Domain Name, then that will need to be resolved into the IP address using DNS.
So we'll find the destination IP address, then when the packet gets down to Layer 2, the sender also needs to know the destination MAC address.
So when it composes a packet, it needs to know both the destination IP address and the MAC address as well
FQDN, which can be resolved by DNS. But the MAC address, on the other hand, is not a logical address.
We need a protocol that's going to be able to figure out what the MAC address is automatically, and that's what ARP is 
it will send out an ARP request, which is a Layer 2 broadcast.
ARP replies are saved in a host ARP cache so that it doesn't need to send an ARP request every time it wants to communicate
with somebody else. To view the ARP cache, we can do that 
on Windows with the 'arp -a' command. clear cache netsh interface ip delete arpcache
On a Linux host, we use the 'arp -n' command clear cache ip -s -s neigh flush all


=========================== OS on CISCO ==============================================

they're all nearly exactly the same!
IOS has got a monolithic kernel, meaning that if one process running on the router crashes, it can crash the entire router. The other newer Operating
Systems have got microkernels, and the processes run in separate, protected memory address space. So if one of the processes crashes, it shouldn't affect the running on the rest of the system.

NX-OS - Cisco Nexus and the MDS Data Centre switches

IOS-XR - On the high-end service provider routers, the NCS and the CRS, and also on the ASR9000 and XR12000 routers

IOS-XE ASR1000 service provider routers

For the device to boot up, it needs to initially load the IOS operating system image, and that is stored in Flash.
Once the operating system is up and running, then it will load your actual administrator configuration
from the startup configuration, and the startup configuration is stored in NVRAM.
That's non-volatile memory,so it's persistent across a reboot. 

=========================== Connect to the Routers and Switches ==============================================

---------------PuTTy - it is a free software
the protocol used is SSH

You don't want to have to configure all your administrators' usernames and passwords on all 100 of those devices separately.
You want that to be centralized in AAA server. That stands for Authentication, Authorization, and Accounting.
It's got access to the central database of all your usernames and passwords, so you'll be having them on each separate device.

Out of Band Management -  most the large companies do is they'll also have a separate dedicated network for management. Gives you a backup path that you can use
to connect to your network devices if they have any problems and it is more secure.
Production Network (In Band) - it being used for your normal user traffic, the network that is used for your staff in their normal activities.


---------------------- make a direct connection using a console cable

Cisco devices do not usually have a default IP address, so we need to set one up before we can connect to it over the network
need to select your correct COM port on your computer when you open the Putty software. To find this information openDevice Manager in Windows, and then look in your ports here, and you'll see the com port, and it's usually COM3

You'll often see that it comes in useful for troubleshooting as well using console cable


===================== ROUTING =================================



A router has got two main functions
that's to determine the best path to available networks, and then to forward actual production traffic to those networks.

The best available path or paths to a destination network are listed in a router's routing table andwill be used for forwarding traffic.
A router may learn lots of different routes, but the best routes into the routing table will be used.

-----------Routing Table
It consists of directly connected networks and routes configured statically by the administrator or dynamically
learned through a routing protocol.
when you do configure the IP addresses on the router's interfaces, it will automatically add routes corresponding
to those into the routing table.
The command to view the routing table on a router is 
'show ip route'

To find out the IP address on the interface, we'd have to
do a 'show ip interface brief' or another similar command to find out that information. 
The show ip route command only shows the subnets available

as soon as you've configured IP addresses on your router interfaces, it can automatically route traffic between those directly connected networks.


Another type of route that is going to show up in your routing table after you've configured IP addresses
on your interfaces is local routes.
these are only going to show up from IOS version 15. Earlier versions did not show these. Local routes always have a /32 subnet mask
From IOS 15, it tells you the subnets that are available on each interface, and
it also tells you the actual IP address that is configured on the interface as well.


===================  static routing ================================

if a router wants to send traffic to a subnet that it's not directly connected to, then it's
going to need some way to know how to get there.
So you need to get that route into the routing table.
You can either do it manually as an administrator by adding a static route, or the router can learn it
dynamically through a routing protocol.

ip route 10.1.0.0 255.255.255.0 10.0.0.2
The command that I need to add is 'ip route 10.1.0.0 255.255.255.0',
so the subnet I need to get to including its subnet mask.
Then, I say the next hop IP address that I need to send traffic to in order to get there.
So for R1, to send traffic to the 10.1.0.0 network, it needs to send it out of its fastEthernet0/0
interface and send it to 10.0.0.2 on router R2, so I add the route for that.

another case
When I add the target for the route, it has to be reachable on a directly connected interface. So R3,
to get to R1, it sends a traffic via R2 which it is directly connected to. 


=====================  summarization and the default route ===========================

we don't need to enter routes for its directly connected networks.They were automatically put into the routing table when we configured our IP addresses.
we do need to configure routes for anywhere that the router is not directly attached to.

it is possible to summarize that into one route
For static routing, summary routes lessen the administrative overhead because if you've got
less routes to configure, that lessens the workload on you.
It also lessens the memory usage on the routers. The last routes that are in the routing table, the
last memory it's going to take up.

So rather than having separate routes for 10.1.0.0, 10.1.1.0, and 10.1.2.0, which
are all of a /24, I've configured one route for 10.1.0.0 with a subnet mask of 255.255.0.0.
I summarized at the classful boundary for a class B address, which is going to
cover our routes all the way from 10.1.0.0 to 10.1.255.0, which is a pretty big range.

Maybe we don't want to have all of those subnets available behind R2
So rather than saying ip route 10.1.0.0 and then to 255.255.0.0, 
lets use route 10.1.0.0, and then subnet mask of 255.255.252.0, and again pointing at
R2 at 10.0.0.2. 


------------- Longest Prefix Match

the router going to take? It takes the one with the longest prefix.
The second route is got a prefix of 255.255.255.0.
The first route is got 255.255.0.0. 
So the second route is a longest prefix.

---------
what if you've got multiple routes for the exact same destination? Meaning, it has the same destination
IP address and the same prefix as well?
In that case, the router will load balance the traffic over those routes.

-------- default gateway
the Internet side, it's 203.0.113.2 at
our service provider. So to add a route going out to everywhere else that we haven't specifically
had a route for elsewhere, it is '0.0.0.0 0.0.0.0' so
our full command is 'ip route 0.0.0.0 0.0.0.0' going to the next hop at our service
provider of 203.0.113.2.
default route is a catch-all for any traffic that does not match one of our more specific routes.



========================  dynamic routing protocols comnparing with static protocol ===============================


When a routing protocol is used, routers will automatically advertise their best paths to
known networks to each other. Routers will then use this information to determine their own best path to those known destinations.
And if the state of the network changes, like if a link goes up or down, or if a new network is added to the
topology, then the routers will automatically update each other with that information. Routers can
use that information to automatically calculate a new best path and update their routing table in accordance
with those network changes.

three routers R1, R2, and R3. 
To the right of R1 got the 10.0.1/24 and the 10.0.2/24 networks. 
R2 and R3 are not directly connected to those networks, so they're going to need a way to find out about them.
can use static routing, which would require me as an administrator to configure static routes everywhere
or we can have them learn it automatically through the use of dynamic routing protocols. 
configure a dynamic routing protocol on both R1, R2, and R3, and
they will then share information about their networks with each other.
R2 also has a relationship with R3, so it will advertise
information there as well (it will update the Routing Table). So R2 will tell R3," you can get to these networks via me"
Obviously, the same thing is going to also happen in the opposite direction, where R3 is going to
advertise its routes to R2, which will then advertise them on to R1.

Just like we could with static routes, we can use summary routes with our dynamic routing protocols as well.
rather the two individual /24s, it advertises 10.0.0.0/16. Reasons we would do this,
summary routes lead to less memory usage in routers as their routing tables contains less routes.

less CPU usage as changes in the network only affect other routers in the same area. Means only the nearby router will be
recalculate the path, others wont know about a route is down.

dynamic routing protocols are more scalable than administrator-defined static routes.
the routers automatically advertise available subnets to each otherwithout the administrator having to manually enter every route on every router.
dynamic routing protocols, if a subnet is added or removed the routers will automatically discover that and update their routing tables.
if the best path to subnet goes down, dynamic routing protocol routers will automatically discover that and will calculate a new best path if one is available.

It is pretty common that you'll use a combination of both a dynamic routing protocol and you'll also have some static routes there as well.
In that case, the bulk of the information is going to be carried with your dynamic routing protocol.
You're only going to use static routing for special use cases, for example, if you want to configure a 
backup route or for a static route to the internet.



================== Routing Protocols =====================================

outing protocols can be split into two main types, thats our IGPs, which are our Interior Gateway Protocols and EGP, which is an
Exterior Gateway Protocol.

Interior Gateway Protocols (IGP) are used for routing within an organization.
Exterior Gateway Protocol (EGP) is used for routing between organizations over the Internet.

the only EGP that is in use today is BGP, the Border Gateway Protocol.

IGPs can be split into two main types, either
Distance Vector routing protocols or Link State routing protocols. 


---------- Distance Vector protocols 

each router sends its directly connected neighbours a list of all its known networks, along with its own distance to each of those networks.
Distance Vector routing protocols do not advertise the entire network topology. 
A router only knows its directly connected neighbours and the list of networks those neighbours have advertised.
because of this, Distance Vector routing protocols are often called as routing by rumuor.


---------  Link State routing protocols

In Link State routing protocols, each router describes itself and its interfaces to its directly connected neighbors.
That information is then passed unchanged from one router to another.
Every router thus learns the full picture of a network, including every router, its interfaces, and what they connect to.


----------- similar DV and LS

Distance Vector and our Link State routing protocols,
both of them only form an adjacency with directly connected neighbors.

----------- difference DV and LS

The difference is that with Distance Vector routing protocols, those updates are from the point of view of the neighbor.
The neighbor says, "I know about these networks and this is what my distance is to each of those." With
Link State routing protocols, the routers still talk to their neighbors
that they say, "Hey, these are all of the routers and their links that are in the network." And the information
passes along unchanged.


Link State routing protocols, the routers have a full picture of the topology and they have a reputation
of being able to make better routing decisions because of this. But Link State routing protocols
do put a bit more load on the router because it's got more information there.


IGPs are: RIP, the Routing Information Protocol; 
EIGRP the Enhanced Interior Gateway Protocol - a Cisco proprietary Distance Vector routing;
OSPF, which is Open Shortest Path First - it's the most commonly deployed IGP today;
ISIS, which is Intermediate System to Intermediate System.


RIP and EIGRP are Distance Vector routing protocols
OSPF and ISIS are Link State routing protocols


our IGPs, they all do the same job which is to advertise routes
within an organization and determine the best path or paths to the different networks.


an organization will typically pick one of the IGPs. They all do the same job,
so there isn't really any need to use more than one of them. Actually using more than one of them is
a bad idea. But does sometimes happen though, usually because of a merger or maybe just historical reasons
If that does happen, then information can be redistributed between the different routing protocols.
But because they work in different ways internally, this can get a bit messy.



===================  routing protocol metrics =======================================

A router may receive multiple possible paths to get to a destination network because it might have multiple
different ways it can get to that network.
It might have multiple neighboring routers with paths available through all of them.
Only the best path,
however, out of all the ones that the router knows about is going to make into the routing table and be used. 
So the different Interior Gateway Protocols (IGPs) needs some way of determining which is the best path,
and they all use different methods to calculate that. Each possible path will be assigned a metric
value by the routing protocol which indicates how preferred the path is, and the lowest metric value is preferred.

So high numbers are bad, lower numbers are better. Use an analogy with cost, cost lower is better


RIP always uses hop count as the metric. A hop is meaning it goes through another router.
The maximum hop count by default in RIP is 15.
The paths which are more than 15 hops away are marked as unreachable by default, a scalability limitation with RIP.
use the shortest hop count even if those links are low bandwidth links, which would really not be the best path.
RIP is not normally used in production networks. Only in really small networks or in test environments.



OSPF does take bandwidth into account.
It uses cost as the metric which is automatically derived from interface bandwidth by default.
You can also manually configure the cost of the links if you want to manipulate the path that OSPF is typically
going to take the best path anyway.


IS-IS
also uses cost as the metric, but unlike with OSPF, it's not automatically derived from the interface bandwidth.
All links have got an equal cost by default.
if you want to force a particular path to be used in IS-IS based on which path has got the best bandwidth,
you're going to have to manually you configure that.
It's not going to do it automatically like OSPF does.
If you don't manually set the link costs in IS-IS, the lowest hop count will be used.
IS-IS links need to be manually configured, or it will use hop count to determine the best path which is not usually what we want to happen
It's typically only used in service provider networks or large organizations with their own MPLS
network who choose it because of its scalability.


EIGRP and it uses the bandwidth and delay of the links to calculate the metric.
Load and reliability can also be configured, but they're ignored by default.
So bandwidth is used the same as it was with OSPF, we also have dealy as well.
But the way the EIGRP works, it's not like it's sending probes over the links to measure what the delay is.
It uses a fixed delay which is based on what the bandwidth is. So basically, it's based on the bandwidth
You can manually configure the delay on links if you want to manipulate the path.


with OSPF and EIGRP, because it is going to use the best bandwidth links anyway, typically, it's going to
choose the path that you would want it to.
But if for some reason it's not, you can override that with manual configuration


===================  Equal Cost Multi Path (ECMP) =====================================

If multiple paths to a destination network
have an equal metric, the router will enter all of those paths into the routing table,
and it will load balance the outbound traffic to that destination network over those available multiple
equal cost paths. And all routing protocols, all your IGPs, will perform Equal Cost Multi Path by default.

EIGRP is the only routing protocol that can do Unequal Cost Multi Path.
So they'll all do Equal Cost Multi Path by default including EIGRP, 
EIGRP will not do Unequal Cost to load balancing by default, but it can do it if you manually configure it to do so. 


=================  administrative distance ======================================

Administrative Distance (AD) is used along with the metric to decide which of the available paths is going to make into the routing table.
A router will typically only learn routes to a particular destination from a single routing protocol.

if for some reason your organization is running multiple routing protocols and a router receives routes to the
same destination from those different routing protocols, then it can't compare their metrics to each other.
For example, a RIP hop count of 5 can't be compared to an OSPF cost of 60.

the router needs to use a different method to choose when routes to the same destination are received from different
routing protocols, and that's what we use the Administrative Distance for. 


The Administrative Distance is a measure of how trusted a particular routing protocol is.
If routes to the same destination are received via different routing protocols, the protocol with the
best, which is the lowest, Administrative Distance value wins. With AD the lowest number is best.

So worst is RIP, with a value of 120.
IS-IS at 115
OSPF has an AD of 110
EIGRP is the most preferred of our IGPs it's got an AD of 90. 
External BGP has 20
a Static Route has a default AD of 1
Connected Interfaces will always be preferred, they have an Administrative Distance of 0. 

The Administrative Distance is considered first to narrow the choice down to the single best routing protocol, and then
the metric is considered to choose the best path or paths, which will make it into the routing table.

'show ip route'
will show us what routes did make it into the routing table
in sqaure brackets [120/2] means AD of 120. The second value is the metric 2 hops


----------  Floating Static routes
we want to configure a backup static route 
it would go through R5 as a first choice. So the command we enter is 'ip route 10.0.1.0 255.255.255.0 10.1.3.2', 
selecting R5 as the next hop, and then we put in an extra keyword at the end here, we say '115'. That sets and AD of 115, which
is higher than the OSPF AD of 110, so this will be used as a backup route

if you do a Floating Static route as a backup for OSPF, if any of the links from R4 to R1
go down, OSPF will detect that and the route will be removed from the routing table. So, that will work just fine



========================   Loopback Interfaces  ==============================


loopback interface is a logical interface, and it allows you to assign an IP address to a router or a Layer 3 switch
Loopbacks are logical, so it's impossible for them to physically be in the same subnet as other devices. So, they're
usually assigned /32 subnet masks to avoid wasting IP addresses.

use a loopback. So that way, we get a single IP address that we can use to connect to R1
even if one of those paths goes down.
what we do is we add interface Loopback 0, and we give it IP address, in our example, 192.168.1.1/32.
You can use any IP address you want for the loopback, and we then advertise that in the routing protocol.
R4 will then learn the two paths that it can use to get to 192.168.1.1,
and it will use whichever one is got the lowest cost or both
if they've got equal costs. And R4 can still connect to 192.168.1.1 even
if either path goes down. this is useful for management, and it's really critical for other things, like BGP and IP telephony



==================  Adjacencies and Passive Interfaces =====================

Our Interior Gateway routing protocols, so RIP, EIGRP, and OSPF, are configured under global configuration. And then, they're either
enabled or not on the router's individual interfaces. When the routing protocol is enabled on an interface,
the router will look for other devices on that directly connected link, which are also running the routing
protocol in order to peer with them. The router does this by sending out and listening for hello packets for that particular routing protocol.

When a matching peer is found, the routers form an adjacency with each other and exchange routing updates with each other.
Modern routing protocols use multicast for the hello packets.
This is more efficient than broadcast that was used by earlier protocols, like RIP version 1. With multicast,
it's specific to the particular routing protocol. So, a device is only going to process that packet if
it's interested in forming an adjacency with that routing protocol. 

Example R1 is connect with others routers, R1 will not send out or listen for hello packets on fastEthernet2/0, because we didn't enable the roouting protocol on that interface.
This interface is connected to RC. RC is a partner, we need to have connectivity to them but we're not going to be giving
them out internal information. In that case, we could use static routes between us and them just to give very limited connectivity.
if an interface is not included in the routing protocol, then the router won't send hello packets out there, and also it won't advertise the subnet configured on that link to other routers either.

what if we do actually need RA and RB to learn a route to get to 10.0.2.0/24 (on fastEthernet2/0)?

That's where passive interfaces come in. Passive interfaces allow you to include an IP subnet in the routing protocol without sending updates out of the interface.
if fastEthernet2/0 is configured as a passive interface, RA and RB will learn routes to 10.0.2.0, but internal network information will not be sent out to RC.


It's best practice to configure your loopback interfaces as passive interfaces always.
It's impossible for another router to be directly connected to the loopback interface, because it's not a physical interface. 
It's just logical, so there's no way we're going to ever form an adjacency on a loopback.
We want other routers to learn how to get to the loopback, but we don't want to waste resources sending out and listening for hello packets when we know
that there's never going to be another router connected in on that link.


========================= How to decide best route =========================

A router's main job is to forward packets received towards their destination based on the packet's destination
IP address and it decides where to forward a packet based on the routes that it has learned.

The 'best route for a packet' decision is based on 
first the longest prefix, which is the most specific route.
Then it is on add Administrative Distance (A lower value, a lower number is better) 
then it is on the metric (known as the cost. You want the lowest cost possible)

If a router learns multiple routes for the exact same network and prefix, it must decide which is the best route out of them.
For example, if it's received a route to 192.168.0.0/24 via TCP from R2, and it's also received a different route via OSPF from R3 for that same network and prefix 192.168.0.0/24
The criteria which is used to decide which is the best route is first up the Administrative Distance.
A lower value, a lower number is better.
And if there is a tie, meaning I've received multiple routes to that same network and prefix with the
same Administrative Distance, then we need a tie breaker and we use the metric as the tie breaker. 
Metric, also known as the cost. You want the lowest cost possible.

If there's multiple best routes which have got the same Administrative Distance and metric, 
they're exactly the same to the same network and prefix, we've got the same Administrative Distance and we've got the same metric, but you've learned multiple routes with those exact same values and they will
all enter the routing table and the router will perform
equal cost load balancing over those different routes.


Example a router learn many routes with the same network of 192.168.0.0, but they've all got different prefixes (/24, /30, /26, /28)
They're only the same if it's the exact same network AND prefix.
If either of those are different, then it is a different destination.
So if we do a show IP route, we're going to see that they all go into the routing table.
The router is not choosing between them because they're different routes going to different destinations,
so they don't have any competition for the exact same network and prefix.
So all of them are the best route to that particular network and prefix.
So all of them go into the routing table.

So they do have overlapping addresses, but they're not exactly the same ranges of addresses.

192.168.0.2 matches all of those routes. it matches all of the different routes.
which one does it decide is the best route that it's going to use?
it's the most specific, which is the one with the longest prefix.
We have got routes which end in prefix /30, /28, /26, /24 and /16, which is the longest?
Which is the biggest number? 
It's the/30.


=================== MTU ==========================


MTU is the Maximum Transmission Unit, and that is the maximum size a pocket can be to be sent across a link on a router.
If the router needs to send a larger packet than the MTU size, it will fragment it into smaller packets.
Normally, we just leave the default MTU size of 1500 bytes on Ethernet interfaces, but occasionally
this needs to be changed, if it's causing an issue with a particular application. It's quite a rare thing to happen.

You can set the 'interface MTU' which affects all packets, and/or an 'interface IP MTU', which affects only IP packets.
This is a setting on the router's interface.

most commonly, we configure the IP MTU. 

show interface GigabitEthernet 0/0', that will show the interface MTU. 
To see the IP MTU, it's 'show IP interface' and then the interface number.


=========================== RIP =========================

the Routing Information Protocol. RIP is a Distance Vector routing protocol.
RIPv2 uses multicast address, 224.0.0.9
RIPv2 supports authentication we can put a password on the router on both sides of the link, so they will not form an adjacency unless we both have the same matching password.

We also have RIPng, as well as RIPv1 and on RIPv2. RIPng is RIP next generation, that supports IPv6 networks

Configure RIP
global config we say 'router rip' and then, optionally, we're going to say 'version 2'. We do want it to be running the latest version, 
and then to specify the interfaces that you want RIP to be running on and to be advertised,
we use the 'network' command. 
we've said 'network 10.0.0.0'. All interfaces that begin with 10 will start sending out RIP hello messages and try to form an adjacency.
When they do form a peering relationship with the router on the other side of the link, they will advertise
all of the 10.X.X.X networks to that router. The network command should reference a classful network, and no
subnet mask is specified. For example, if on the router, we had an interface with IP address 10.1.1.1/24,
we don't say 'network 10.1.1.0', we say 'network 10.0.0.0'. 
RIP will automatically summarize routes to the classful boundary by default.
For example, if you've got an interface with IP address 192.168.10.1/30, and under RIP, you include that with a network statement,
it will be advertised as 192.168.10.0/24. Because any address that begins with 192 is a Class C address, which has got a default mask of /24.
If we had an interface with IP address 172.16.10.1/30, that will be advertised as 172.16.0.0/16, because that's a Class B address and it would default to a /16.

Your network, modern real networks, aren't designed that they all fall into the summarization ranges exactly on classical boundaries. 
So, if you leave auto-summary turned on, it's liable to cause havoc on your network, possibly blackholing, dropping some of your traffic.
we always disable auto-summary. To do that, the commands is 'router rip' and then 'no auto-summary'
we probably still will want to do summarization manually. To do that, the command is 'ip summary-address'.

to verify any routing protocol that we've got running on a router, we can say
'show ip protocols'

If I wanted to see my RIP configuration
'show run | section rip'

if you've configured RIP and then you can see that you've got RIP neighbors,
but you look in the routing table and you're not seeing the expected routes in there.
maybe, the routes weren't even received at all.
So the way that you can check that is with the 
'show ip rip database'
or maybe the routes were received but they're not the best route. So to check if the routes were received at all by RIP, whether or not they made
it in routing table or not

default route injection.
we don't want to have to configure a default static route on every single router.
So what we'll do is on the final outbound router, which is connected out to the Internet,we will configure a default
static route there, and we will then advertise, it inject it into RIP, so all of our other internal routers will learn about it automatically.


=======================  EIGRP ====================================

EIGRP stands for the Enhanced Interior Gateway Routing Protocol.
It supports large networks. It has a very fast convergence time, way quicker than RIP
It supports bounded updates where network topology change updates are only sent to routers affected by the change, so it's more efficient. 
It doesn't flood information everywhere when it doesn't need to. 
And messages are sent using multicast rather than broadcast

perform equal cost load balancing on up to 4 paths by default. You can manually increase that up to 16
paths that it can load balance over if you want to.

EIGRP is also the only routing protocol that can also do unequal cost load balancing. So all of the
other routing protocols, if there's multiple paths that have got the same metric, then they can load balance
over those equal cost paths. But EIGRP, it can have multiple paths with unequal metrics, and you can
configure it to load balance over those different paths

To enable it, we say 'router eigrp' and then an AS number

at global config.

The AS is the Autonomous System number, meaning an independent administered domain. EIGRP routers need
to have the same AS number to peer with each other.
So you could have, say, two different organizations that have got an extranet with each other. So they're
connected, and they're both using EIGRP internally. In that case, they would use two different AS numbers.
So Organization A would have its AS number, and it would have its internal routes. Organization B would
have a different AS number, and it would have its own internal routes. And EIGRP between the two organizations,
even though it's physically connected, would not peer. They wouldn't be sharing information with each other.

the router ID
EIGRP routers identify themselves to other EIGRP routers using a router ID, and this is in the form of an IPv4 address.
The router ID will default to being the highest IP address of any loopback interfaces configured on
the router, or if there's no loopbacks, then it will be the highest other IP address on a physical interface.
it's recommended to either use the loopback interface, or another way that you can do it is to manually specify a router ID.

To view what the router ID is, we can do a 'show ip protocols'. So in the output of that command,
for example, my router ID is tend or 10.0.3.1.
If I did have a loopback, then even if the loopback interface is lower than the IP address on
a physical interface, it will be the router ID.
the EIGRP router ID. It needs the EIGRP process to be restarted before it will pick up the new IP address.
you could disable and then re-enable EIGRP, or you could reboot the router.
That will force it to come up with that loopback address as the router ID.

If you want to manually specify the router ID, the command is under the EIGRP process,
'eigrp router-id' 
and then the router ID that you want to use, that has to be in the format of an IPv4 address.
 this isn't actually an IP address. It's just a router ID, but it uses the format of an IP address
'eigrp router-id 2.2.2.2'


===========================   OSPF  ======================

 Open Shortest Path First Protocol.
it is an IGP -  Interior Gateway Routing Protocol
It's a Link State routing protocol 


---------  characteristics of OSPF

it supports large networks and has very fast convergence time. 
Messages are sent using multicast rather than broadcast, so it's more efficient
It is supported on all vendors' equipment, and there's plenty of support for OSPF, supported by everybody,
loads of engineers understand it and are used to working on it, lots of documentation on the Internet, etc.

Link State routing protocols, each router describes itself and its interfaces to its directly connected neighbors.
This information is then passed unchanged from one router to another. 
OSPF routers use LSA, Link State Advertisements, to pass on the routing updates.

when you enable OSPF on a router, the first thing it will do
will discover its directly connected neighbors and form adjacencies with them.
They will then share routes with each other
by flooding the Link State Database (LSDB). Once all of the potential routes are learned, the router will then compute
the shortest path and the best routes will be installed in the routing table.
After that, the routers will respond to network changes, for example, if any new links are added, or if any links go down. 

Our different packet types that are used in OSPF,
first one is the Hello packet.
As soon as you enable OSPF on an interface, it will start sending out and listening for Hello packets.
And when it receives a Hello packet on that interface, it will form an adjacency with the neighbor.
Once the routers have formed adjacencies, they will send DBDs to each other. DBD is the Database Descriptor.
That includes information about all the networks that the routers know about. If the router is missing
information about any of the networks it received in the DBD from a neighbor, it will send that neighbor
an LSR, which is a Link State Request, asking for more information.
The router will reply back with an LSA, a Link State Advertisement.

Other packet types we can have is an LSU, a Link State Update. That contains a list of LSAs which should be updated.
This is used during flooding.
So for example, if a new link was added or if a link went down,
that information needs to get flooded everywhere with an LSU.
And finally, we have the LSAck, which is the acknowledgement message.
Whenever a router receives a message from a neighbor, it will send an acknowledgement back.
So, this makes sure that the protocol is reliable.
If a router sends out a packet and it doesn't get an acknowledgement, it will resend it.


-------------- basic configuration of OSPF 

enable OSPF, the top level command at global config is 'router ospf' and then, a Process ID.
(config)# router ospf 1

It's not normal to have different Process IDs on the router.
even though the Process ID is different on the routers, that's a locally significant number. It does
not have to match on both sides, so the routers will still form adjacencies.

interfaces are in two different processes.
So they're going to have separate Link State Databases, and information is not going to be shared between the two sides.
So R1 and R3 will not learn routes to each other because both sides are in different process IDs on router R2.
It is absolutely not normal to do that. Very rare that you would see this.

What is more normal is where all the routers in your network are all using the same Process ID number
we configured router OSPF and usually we'll use a Process ID of 1. The next command to use is the network command
network, and then the network address, space, and then the wildcard mask, which is the inverse of the subnet mask, and then
specify the area. If you've got a small network, you can just put everything in area 0.
'network 10.0.0.0 0.0.255.255 area 0'

If your subnet mask was 255.255.255.252, your wildcard mask would be 0.0.0.3

show all of the OSPF commands in your running config, whether they're under the main OSPF part of the configuration
or at the interface level.
#sh run | section ospf

'show ip protocols'
will show all the routing protocols that are running on the router. 

'show ip opf interface brief'
will show which interfaces have got OSPF enabled on them on this router,
the Process ID for the interface, the area, the IP address and mask, the cost for the metric, and how
many neighbors are reachable through that interface. 

'show ip ospf neighbor'
The command to check that is  check is that it has been able to form adjacencies.

The next thing that happens with OSPF operations is the routers will flood the Link State Database (LSDB). To see if
routes have been learned from OSPF, you can use the 
'show ip ospf database'

The next thing that happens is the routers will look at all the available possible paths, and they will
decide which is the best path using the Shortest Path First algorithm, and put that best path into the routing table.
So, next command to verify is 
'show ip route' 
and check that you've got OSPF routes in the routing table.


-------- Advanced OSPF topics of the router ID, how to configure passive interfaces, and default injection

-> router ID
OSPF routers identify
themselves to other OSPF routers using an OSPF router ID, which is in the form of an IPv4 address.
It defaults to using the highest IP address of any loopback interfaces configured on the router, or if there's
no loopback interfaces, it will use the highest other IP address.
Best practice is to use a loopback or manually set an ID, so it won't change, makes things more stable
Router ID. We can verify that by using the 'show ip protocols' command.
To update the Router ID in a production environment,
you would just wait until the next reboot because disabling and re-enabling OSPF would be disruptive

if you want to manually configure it is under the 'router ospf' configuration, 'router-id', and
then the ID that you want to use, in the format of an IP version 4 (IPv4) address
(config-router) router ospf 1
(config-router) router-id 2.2.2.2


-> passive interfaces
if you configure a passive interface, it will be advertised in OSPF. So other routers will learn how to get to that network,
but the interface itself will not try to form any adjacencies, and it won't give out any internal information.

we have to include it as a passive interface, so that your other routers will learn how to get to that loopback address
we want our other internal routers to know how to get to that network, but we don't want to be giving out
any of our own internal information out on that link
(config)# router ospf 1
(config-router) passive-interface loopback 0
(config-router) passive-interface f2/0

-> route injection
this is configured in a similar way as RIP
R4 is connected out to an Internet Service Provider (ISP), so we configure a static default route on R4 with the command
'ip route 0.0.0.0 0.0.0.0 203.0.113.2'  203.0.113.2 it is the next hop which is the internet
We don't want to have to configure static routes to get out to the Internet on all of our routers,
we want them to learn that dynamically,
so we're going to inject it into the OSPF process on router R4. The command to do that is 
'router ospf 1'
and then, 
'default-information originate'

To verify it do a 
'show ip route' on your other routers
check that they do have a default route to the 0.0.0.0 network.
This will show up as an external route in OSPF.
What an external route is, it doesn't mean it's come from somewhere outside your organization.
What it means is that the route was redistributed into OSPF. 


---------------  OSPF areas

Link State routing protocols, every router learns the full picture
of it's part of the network, including every router,
its interfaces, and what they connect to, and this can cause issues in large networks.
there is going to be a lot of routes in its routing table and that can take up too much memory.
Also, if there's a change in the network, like a new link being added or a link going down, that causes
all routers to reconverge which takes time and CPU resources.

OSPF supports a hierarchical design, which segments large networks into smaller areas.
Each router maintains full information about its own area, but only summary information about other areas.
So the routers are going to have less routes in their routing table and if a new link comes up or goes down in another area
We've got the transit area, also known as the backbone or Area 0.
It does not generally contain end users when we've got a multiarea network. And then we've got our regular areas,
also known as our nonbackbone areas, which hang below Area 0.
They're used to connect end users to the transit area. By default,
all transit traffic goes through the transit area.
Area 0 it is the backbone router
your backbone routers will have the full Link State Database (LSDB) for all of the other links that are also in Area 0.

ABR, our Area Border Router. Routers which have interfaces and multiple areas are ABRs.
hey separate the flooding zones. This is what really segregates our network into the different areas and compartmentalizes our network.
So if we have a link goes up or goes down in that area, it's going to keep the information just in that one area. It doesn't impact our other areas. 
The ABR is also where we always do our summarization in OSPF
full Link State Database (LSDB) for Area 0, so it knows about all the individual networks in Area 0, and it also has the full Link
State Database (LSDB) for Area 1. Our ABR on the right here, it will have the full LSDB for Area 0
and for Area 2, but it only has summary information for Area 1. Ideal design is to have each ABR connected
to two areas only, the backbone and another normal area. An important point is that your ABRs do
not automatically summarize. You need to do this manually, and if you don't manually configure summarization,
all routes will be flooded everywhere

so a route that was a learned from an ABR which is in another area, will show up as 
type 'O IA'
for inter area routes.

ASBR, an Autonomous System Boundary Router.
So ABR is an Area Border Router, ASBR is Autonomous System Boundary Router. What and ASBR is
it means that on that router, it's running OSPF and we're redistributing from another source into OSPF.
So maybe, we're also running EIGRP or RIP on that router. We're taking our EIGRP or RIP routes and we're
redistributing them into OSPF, so they'll also be advertised through our OSPF neighbors, or maybe it's
a static route that we're redistributing into OSPF.

Our redistributed routes show up as external route. So an external route
does not mean it's outside this enterprise, outside this organization. It literally means it was redistributed
into OSPF and if you look at the routing table, this will show up as a type 'O*E' either E1 or E2 for an external route.



------------ OSPF cost metric works and how it's based on interface bandwidth by default

'speed' command 
it's the 'speed' command that you can use to change the default physical speed of the interface.
The rate that Ethernet interfaces physically transmit at is set by the 'speed' command.
GigabitEthernet interfaces transmit at 1000 megabits per second (Mbps) by default. 
A thousand megabits per second is 1 gigabit per second
FastEthernet interfaces transmit at 100 megabits per second by default.
if you use the 'speed 10' command on a FastEthernet interface and it supports it, it will
physically transmit at 10 megabits per second instead.
it has to match on both sides of the link.

'clock rate' command
this works on Serial interfaces. Serial interfaces used to be used very commonly on WAN links
Serial interfaces transmit at 1.544 megabits per second by default. 
That is the speed of a T1 interface that used to be commonly used in the United States.
'clock rate' command to set a transmit rate in kilobits per second (Kbps).
this will change the physical speed of the interface,  it has to match on both sides of the link.

'bandwidth' command
'bandwidth' does usually match physical transmission rate of the interface. It will do by default
and normally, as the administrator, we want to leave it at that as well.
The bandwidth setting on an interface does not affect the physical transmission rate, that is set by the 'speed'
or the 'clock rate'.
If you set a bandwidth of 50 megabits per second on a FastEthernet interface, it will still transmit
at 100 megabits per second.
it affects software policy on the router, such as which path will be selected by our routing protocols,
EIGRP or OSPF, or how much bandwidth will be guaranteed through a traffic type by QoS.
you normally want the bandwidth to actually match the physical interface. 
you don't have to have the matching. Sometimes, you want to override what would happen by default.
So you don't do this very commonly, but it is possible to set the bandwidth to be different than the
actual bandwidth on the physical interface if you want to influence software policy.


----------- OSPF metric COST 

In a multiple area OSPF network, ABRs know the information for each area
that they are connected to, so that will normally be two areas. 'Area 0' (the backbone)
and also the normal area that they're connected to.

For destinations in a different area, a router looks at all available links to get to the ABR
and chooses the path with the lowest overall cost to the ABR.
It's then up to the ABR to choose the best path onwards from there.

ensure that the cost is set the same on the interfaces on both sides of the link,
or you can get asymmetric routing.

the cost would be 50 (the cost to R1) plus 10, (the cost of the link itself)

The cost for OSPF is automatically derived from the interface bandwidth.
So a higher bandwidth interface will be automatically preferred.
The way that the cost is calculated is it's the reference bandwidth divided by the actual interface bandwidth.
And the default reference bandwidth is 100 megabits per second.
So what this means is if you've got a FastEthernet link, that would default to a cost of one.
Because FastEthernet, the default bandwidth on there is 100 for 100 megabits per second.
We divide 100 by 100, that gives us a cost of one. On a serial interface, like a T1 in the example here,
the bandwidth there is 1.544 megabits per second. So that will default to a cost of 64 because 100 divided by 1.544 is 64.

OSPF will treat all interfaces of 100 megabits per second or faster as equal,
the best possible cost is one. We don't have like a 0.1 cost.
So FastEthernet, Gigabit Ethernet, and 10 Gigabit Ethernet, et cetera, 40 Gigabit Ethernet, 100 Gigabit Ethernet,
they will all default to a cost of one

using the old default reference bandwidth, they'll all be treated the same equal cost by OSPF.
So we want to set the reference bandwidth to a higher value.
(config) router ospf 1
(config-router) auto-cost reference-bandwidth 100000

if you set it to 1000, for example, that would mean that Gigabit Ethernet interfaces
will have a cost of one, FastEthernet will get a cost of 10.
when you set the reference bandwidth, you need to do it the same on all routers
so they're all using a consistent metric.

you might want to manipulate this,for example say you've got a high latency satellite link
which has higher bandwidth but you want to prefer a lower bandwidth interface.

you can manipulate that by manually changing the bandwidth or the OSPF cost on interfaces.
It's recommended to use cost because the bandwidth setting can affect many features
other than OSPF, such as QoS.


------------ how OSPF routers form adjacencies with each other and build their Link State Databases.

Most packets in a production network are going to be TCP or UDP, so will be marked as either protocol number
6 or protocol number 17. TCP - 6 ; UDP - 17
But for our OSPF routing protocol packets, they use a protocol number of 89.

starting off with the Hello packets. OSPF routers discover each other and form adjacencies
with each other via the Hello packets. They send Hello packets out
each interface where where OSPF is enabled, except passive interfaces.
passive interfaces, we don't want to be sending information out there, sharing updates about our internal networks.
you're going to have passive interfaces configured where you're connected to a third party
that you don't want to be sharing your routing information with. enable passive interfaces on our loopback interfaces as well.

the way that we enable OSPF on an interface is by enabling OSPF globally,
and then we enter a network statement, which includes the IP subnet that is on that particular link.
When we do that, it turns on OSPF in the interface.
It's going to start sending and listening for Hellos. When these Hello packets are sent out, they're
they're multicast to the multicast address 224.0.0.5, that is designated as the all OSPF routers' multicast
address, and Hello packets are sent every 10 seconds by default.

The contents of the Hello packet, we've got the router ID
that's a 32-bit number, looks just like an IPv4 address that uniquely identifies each OSPF router

Next thing in the Hello packet is a list of neighbours. So a list of adjacent OSPF neighbours that this router has received
a Hello packet from.

and so on...


===================== CDP ==================================

Cisco Discovery Protocol (CDP) and Link Layer Discovery Protocol (LLDP)
They're both very similar protocols.

CDP, Cisco Discovery Protocol, is a Cisco proprietary Layer 2 protocol, and it is used to share information
with other directly connected Cisco equipment, such as the operating system and the IP address.
That information will be shared between connected devices. That aids in troubleshooting by allowing administrators
to map out how Cisco devices are connected to each other.

CDP is enabled by default on most Cisco equipment. Not just on routers and switches, also on the firewalls, and even things like software,
like Cisco Unified Communications Manager (UCM) which is used to control IP phones, and even the IP phones as well will run CDP.

CDP works at Layer 2, so it's not necessary for the device to have an IP address on it for it to be detected by its neighbors.

if you want to disable it, 
'no cdp run'
To turn it back on again it's 
'cdp run'

That's done at global configuration. A reason you would maybe want to disable CDP is it can be seen as a security concern.
(config-if) no cdp enable   -> this is for a interface,  will now stop sending out CDP information on that particular interface
(config) no cdp enable      -> If I'm in a highly secured environment and I just want to completely disable CDP on the switch

# show cdp
# show cdp neighbors
# show cdp neighbors detail

you've got a switch on the edge of your network, and you want CDP to be enabled on the internal facing interfaces. 
You want to disable it on the external facing interface so you don't give up information to another organization.
you can do a no cdp enable at the interface level

If you do have a duplex mismatch, then CDP, Cisco Discovery Protocol, should detect that

========================== LLDP ====================================

LLDP is an open standard. So, it's supported on most vendors' devices, and it provides similar information to CDP.

LLDP is only supported on physical interfaces.

CDP is also supported on virtual sub-interfaces as well.

With LLDP, it can only discover up to one device per port. CDP is able to discover multiple devices
per physical port because it does support those virtual sub-interfaces. 

LLDP can discover Linux servers, CDP cannot.

(config) lldp run
(config) no lldp run
(config-if) no lldp transmit
(config-if) no lldp receive
# show lldp
# show lldp neighbors
# show lldp neighbors detail


========================= FIREWALL ============================

The Cisco firewall is the ASA (Adaptive Security Appliance)
The IPS, the Intrusion Prevention System, from Cisco is the SourceFire

This is how stateful firewalls are able to keep track of connections as well.
Imagine that rather than a switch in the middle there,
if it was a firewall, and we had a rule in the firewall that said traffic is allowed out from the sender
on the left out to the network on the right,
but traffic is not allowed from the right to the left unless it was initiated from the sender.
If you manage to follow that, well, in that case, on the firewall, we're allowing traffic from the sender
to the receiver. That traffic is allowed outbound. When the return traffic comes back, the firewall could
see based on the source and destination port numbers, "Oh, this is return traffic going back to that
sender again,
so I'll allow this traffic to come through." If your traffic had been initiated by the host on the right,
it would not allow that traffic. Okay, so that's how stateful firewalls work


=================== DATA CENTER ==================================

UCS stands for Unified Computing System, as well as the blade server that you see here. Cisco also have standard rackmount servers as well.
With the UCS, Cisco moved into offering compute as well, where you can actually run your servers
directly on Cisco hardware.
The other main product that Cisco have for the Data Center market is the Nexus Switches.
These are very similar to the standard Cisco Switches, which run the IOS software.
They do exactly the same job, but these are often a bit higher-end switches, and they run the NX-OS software instead.


=================== IP PBX ======================================

A lot of modern companies still are using traditional PBXs, but IP PBXs are getting more and more popular.
Cisco's Unified Communications Manager is one of the most popular IP PBXs 


=========== CISCO DEVICE MANAGEMENT ==============================

different memory locations on your device.

There's four built-in memory locations.

First ROM, the Read Only Memory.
Flash. On older devices, that will be installed in the cache on the motherboard. On newer devices, it's a removable CompactFlash card.
NVRAM, the Non-Volatile RAM
RAM the normal Random Access Memory.
You can also use an external USB memory stick plugged into the device as well.

ROM has got two main functions,
First is the Power On Self Test. The POST test will check for any problems with the hardware.
It will then load the bootstrap, and the bootsrap will look in Flash for an IOS software image to load next.
get instructions, just search in Google for 'Cisco ROMMON Recovery' in case is not boot up and to recover the device


To make sure that you get the newer image, the command to use is
'boot system'
'flash' 
and then the system image name. That's a global configuration command. 


When the system has finished loading the IOS system image from Flash, it will then load the start- up config, configuration file from NVRAM, 
and the saved start-up config then becomes the current running-config in RAM.


Whenever you enter a command in IOS, it takes effect immediately and goes into the running-config in RAM. To make your changes permanent across a reboot,
'copy running-config start-up config' command
that copy it into NVRAM, which will be used the next time the system boots up.


VLAN database
That file is the 'vlan.dat' file.
It's just on a switch where it saves the VLAN information, and that is saved in either Flash or NVRAM, depending on the model of the switch.


TFTP server
load a system image and/or startup-config from an external TFTP server rather than from Flash or NVRAM.
That is not recommended, though, because the device will not be able to boot if it loses connectivity to that TFTP server
So, the only reason you would ever really do that is if you want to load a new version of the system
image and there's not enough Flash memory capacity on your device to store that.
Then, you can save it to an external TFTP server instead and boot from there. 



-------------------factory reset and password recovery

factory reset 

the enable prompt (#), we use the 
'write erase' command
That will erase the startup-config. You do that, you then reload the device, and it will boot up with a blank configuration.
There is no startup-config, so the Setup Wizard will then run.


configuration register. 
That is used to change the way that the router boots from the default.
You can use the 
'config-register' command in global configuration mode, or if you're at the ROMMON prompt to where the router or a switch hasn't completed booting yet, 
'confreg' command.

For example, we could use 'config-register 0x2142' for that setting at global config or 'confreg 0x2142' if we were at the ROMMON prompt.
three most useful.
First is 0x2102. That should be the default. The device will boot normally when that is the setting. 
Next one is 0x2120, will boot into ROMMON mode.
Lastly, 0x2142 will ignore the contents of NVRAM while booting, so it will ignore the startup-config.


-----------------password recovery  --google

Always google the steps , because you do once in a while

whatever kind of device is that you need to recover, it will be very, very similar to those instructions below

You need to reboot it.
Then while it is rebooting, press the break sequence on the keyboard. That is commonly Ctrl + Break
during the first minute that the device is powering on, and that will break you into the ROMMON prompt. You then enter the command 
'confreg 0x2142' at the ROMMON prompt, which says to ignore the startup-config on boot
The startup-config is still there, and the full configuration, everything that was configured on that device is there as well
but the router is not going to use that startup-config when it boots up, so you don't need to know what the enable secret is. 
You then enter 'reset' at the ROMMON prompt to boot the device. The router
will boot up with no configuration, so it will enter the Setup Wizard. You then type 'no' to bypass that.
You then enter enable mode with the 'enable' command.
Next thing you need to do is copy the startup-config to the running-config. Do not forget that step. If you forget that step and you do everything else correctly you're going to end up factory resetting that device
then enter a new enable secret in global configuration mode to overwrite the old one, and that will go into the current running-config. 
Then enter 'config-register 0x2102', so the router will boot normally on the next restart.


'enable password' is really a legacy command,
'enable secret' is the new form of doing it.
When you do look at the running-config, 'enable password' is unencrypted by default. 'enabled secret' is always in an encrypted form.
So, that could be a security concern. If you've enabled both 'enable secret' and the 'enable password', then the 'enable secret' overrides the 'enable password'.



==================   backing up the IOS system image and your config file on your router or switch  =======================

You can back up either to an external FTP, or TFTP server, or to a USB stick, or you can back up to Flash in the device.
copy flash tftp
copy running-config tftp
copy running-config usb 

If you do want to restore an old version of the configuration file, you can't just copy it into the startup or running-config because if you do that, it will be merged.
It's not going to replace it
the way that you do that is you, first off, factory reset the device.
You then copy that old config into the startup-config and then reboot, and then you're back with that old config.



========================  upgrade the IOS system image on your Cisco router or switch ============================

First thing that you need to do is get the new software image, so you get that from the Cisco Website
https://software.cisco.com.

download it from the Cisco website, and then copy it onto your TFTP server.
copy tftp flash
Then from the TFTP server, you're going to download it to Flash on the device.
Once you've got it on Flash, then either delete the old image, leaving just the new one there and the device
will now boot up from the new image, or if you want to keep both images on there just in case you need
to fall back to the old one, then to make sure that it uses the new image
use the 'boot system' command.



========================  VLANs =====================================


----------- LAN 

Local Area Networks (LANs). So, that could be for a single building
or it could be several buildings within a few hundred meters of each other on the same local campus.
the network topology is split into access, distribution, and core layers
when we're doing the design. The layers have their our own design principles and characteristics

access layer switch is where your end hosts plug in. in the real world, you would have multiple hosts plugged into the same switch.

Servers will often have dual NICs to give them some extra redundancy.
So they will connect into a pair of redundant access layer switches,
and your client access security measures, such as port security  are enabled at the access layer.

The next layer up is the Distribution Layer.
the level above the access layer, we have our distribution layer switches, and the access layer switches uplink to the distribution layer switches. 
the access layer switches are not usually connected to each other. They connect upstream to the distribution layer switches.
The distribution layer switches serve as an aggregation point for the access layer and provide additional
scalability in our Local Area Network.
They are typically deployed in redundant pairs.
at the distribution layer, most software policy, such as Quality of Service (QoS) policies, is enabled at the distribution layer.

The next layer we have up is the Core Layer.
deployed in redundant pairs 
is designed for speed and resiliency.Software policy (QoS) slows the switch down 

Collapsed Distribution and Core layer.
That is common, because smaller campuses don't need the scalability of three separate layers.
So in most cases, a Collapsed Distribution and Core layer is used where the Distribution and Core layer
functions are performed on the same hardware device.


---------------- Spine and Leaf datacenter network design

in modern data centers, there's a trend nowadays where we see a lot more traffic going in East and West bound direction,
and what I mean by that is between the actual servers themselves in the data center. The reason for
that is that data centers are getting bigger. There's a lot of virtualization now,
so many virtual servers and those servers might be clustered where an app is spread across multiple
different servers and all of those servers need to talk to each other.
We also might have an application, for example, which has got a web-based front end on a server, and that's
talking to a backend database on another server as well.
So again, that traffic, rather than going North and South bound through the different layers,
would be going East-West bound between the different servers themselves.

We don't have our servers connected there.
Our servers are connected into our Leaf layer switches and we have got a mesh between.
So all of our Leaf switches are connected to all of our Spine switches,


You switches flood broadcast traffic everywhere, including between different IP subnets, and that raises
performance and security concerns.
We can increase performance and security in the LAN by implementing VLANs on our switches.
VLANs segment the LAN into separate broadcast domains at layer 2.


access ports are configured on switch interfaces where end hosts are plugged in,
and access ports are configured with one specific VLAN.
The configuration is all on the switch. The end host is not VLAN aware,
The default VLAN is VLAN 1. So by default, all ports on a switch are in VLAN 1
#create vlan
(config) vlan 10    is the number we're going to use for, could be 20, 30, so on
(config-vlan) name <Vlan-name>
# configure switch port
(config) interface FastEthernet 0/1
(config) switchport mode access
(config) switchport access vlan 10
(config) interface range FastEthernet 0/2 - 5
(config) switchport mode access
(config) switchport  access vlan

show vlan brief

If you want to see information specific to an individual port, you can say 
show interface fastEthernet0/1 switchport


what about the links between switches?
we need PCs in different VLANs to be able to talk with each other across different switches,
and the way we do that is by configuring a trunk port.
The protocol which used for our trunking is Dot1Q.
So on the links between switches, rather than configuring them as an access port which can only carry traffic
for one VLAN, we configured them as a trunk port which will carry traffic for all of our VLANs.
when the switch sends the
traffic to an end host, it removes the Dot1Q VLAN tag because our end hosts are not VLAN-aware.
They don't need to see that tag, it confuse them.

a special case of end hosts is virtualized hosts, like VMware or Microsoft HyperV, where there's
virtual machines in different IP subnets on the host. So that one host, that's maybe running a virtual
machine for Engineering, it's also running a virtual machine for Sales.
So in that case, you need to trunk the VLANs down to that host so it knows which virtual machine to
send the traffic to.

(config) interface FastEthernet 0/24
(config-interface) description Trunk to SW2
(config) switchport trunk encapsulation dot1q 
(config) switchport mode trunk


DTP, the Dynamic Trunking Protocol. If two Cisco switches are
cabled together, it's possible for them to automatically negotiate a trunk connection on those ports
they're connected with using Cisco's proprietary DTP


VTP, the Vlan Trunking Protocol. It allows you to add, edit, or delete
VLANs on switches which are configured as VTP servers, and then other switches which are configured
as VTP clients, will synchronize their VLAN database with the servers.
if later on, you don't need the Sales VLAN anymore, you can delete it on a VTP server and it
will be automatically deleted on all of the clients.
Or if maybe, it was VLAN number 10 before and you change it to VLAN number 100, that information
would also be synchronized across all of your switches.



============================ DHCP ======================

DHCP and more convenient than it is to manually assign IP addresses to everything.
We can configure a Cisco router to be a DHCP server, also support an external DHCP server,
a Cisco router can be a DHCP client itself and get its own IP address via DHCP.

DHCP, the Dynamic Host Configuration Protocol. It's a client/server protocol
that automatically provides a host with its IP address and other related configuration
information like its subnet mask and default gateway.
your routers, your switches, and your firewalls, are not good candidates to be DHCP clients.
They're mission-critical devices that are required for the running of the network and for its services to function.
Their IP addresses are going to be fixed.

in Mac, 'ifconfig' to see the IP address and subnet mask
'netstat -rn' to see the default gateway.

linux
 'ip route show' default gateway.
ip a  for ip and subnetmask


================   HSRP, the Hot Standby Router Protocol ======================

This is where we put extra devices into the network, so that we don't have any single points of failure. 
If any single one of our network infrastructure devices, like our router or switch fails, there's another one sitting there that can take over its load.
It makes our network more resilient


-------- First Hop Redundancy Protocols 

First Hop Redundancy Protocols.
When we do have redundant devices in the network, we're going to have redundant default gateways for our end devices.
If their main default gateway goes down, we're going to have another default gateway that they can failover to
the most popular of the FHRP protocols in a Cisco environment is HSRP, the Hot Standby Router Protocol

So our backup route is also going to be a static default route 0.0.0.0 0.0.0.0
this backup route, we give that a higher administrative distance of 5 because I don't want to load balance my Internet bound traffic
The lower the administrative distance the better, so the second route with an AD of 5 is only going to come into effect if the first one goes down.










